!function(){"use strict";var t=function(){function t(){this.tabControls=new Map,this.onHashChange=this.onHashChange.bind(this),window.addEventListener(t.HASH_CHANGE_EVENT,this.onHashChange)}return t.prototype.registerTabControl=function(t){var e,a=null===(e=t.getTabControlId())||void 0===e?void 0:e.toLowerCase();a&&this.tabControls.set(a,t)},t.prototype.updateHash=function(e,a){var o=e.getTabControlId();if(o){var n=a.split(t.HASH_SEPARATOR);n.length>1&&(a=n[1]);var i=new URL(window.location.href);i.hash=this.buildUpdatedHash(i.hash,o,a),history.pushState(null,"",i.toString())}},t.prototype.applyHashToTabs=function(){var e=this,a=window.location.hash.substring(1);a&&new URLSearchParams(a).forEach((function(a,o){var n=e.tabControls.get(o.toLowerCase());n&&n.activateTabFromHash("".concat(o).concat(t.HASH_SEPARATOR).concat(a))}))},t.prototype.onHashChange=function(){this.applyHashToTabs()},t.prototype.buildUpdatedHash=function(t,e,a){var o=new URLSearchParams(t.replace(/^#/,""));return o.set(e.toLowerCase(),a.toLowerCase()),o.toString()},t.HASH_CHANGE_EVENT="hashchange",t.HASH_SEPARATOR="=",t}(),e=function(){function t(t,e){void 0===e&&(e=null),this.tabs=[],this.tabPanels=[],this.firstTab=null,this.lastTab=null,this.targetedTabPosition=null,this.rootElement=t,this.tabsContainer=this.rootElement.querySelector("[role='tablist']"),this.tabPanelsContainer=this.rootElement.querySelector(".tabControl_tabPanelContainer"),this.hashManager=e,this.tabsContainer&&this.tabPanelsContainer?(this.controlId=this.rootElement.getAttribute("data-tab-control"),this.hashManager&&this.controlId&&this.hashManager.registerTabControl(this),this.onKeydown=this.onKeydown.bind(this),this.onClick=this.onClick.bind(this),this.initialize()):console.error("TabControl initialization failed: Required elements not found in root element ID '".concat(this.rootElement.id,"'."))}return t.prototype.getTabControlId=function(){return this.controlId},t.prototype.activateTabFromHash=function(t){this.setSelectedTabByHash(t)},t.prototype.initialize=function(){var t=this,e=Array.from(this.tabsContainer.querySelectorAll("[role='tab']"));if(0!==e.length){var a=Array.from(this.tabPanelsContainer.querySelectorAll("[role='tabpanel']"));if(e.length===a.length){this.tabs=e,this.targetedTabPosition=this.getTargetedTabIndex(),this.tabs.forEach((function(e,a){var o=e.getAttribute("aria-controls");if(o){var n=t.tabPanelsContainer.querySelector("#".concat(o));n?(n.getAttribute("aria-labelledby")!==e.id&&console.error("TabPanel with ID '".concat(o,"' does not have a valid 'aria-labelledby' attribute.")),"tabpanel"!==n.getAttribute("role")&&console.error("TabPanel with ID '".concat(o,"' has an invalid 'role' attribute.")),t.tabPanels.push(n),e.addEventListener("keydown",t.onKeydown),e.addEventListener("click",t.onClick),null===t.firstTab&&(t.firstTab=e),t.lastTab=e):console.error("TabPanel with ID '".concat(o,"' not found."))}else console.error("Tab at index ".concat(a," is missing 'aria-controls' attribute."))}));var o=window.location.hash.toLowerCase();if(this.hashManager&&this.controlId&&o.includes(this.controlId.toLowerCase()))this.hashManager.applyHashToTabs();else{var n=null!==this.targetedTabPosition&&this.targetedTabPosition>=0?this.tabs[this.targetedTabPosition]:this.firstTab;n?this.setSelectedTab(n,!1,!1):console.warn("No valid tabs were found.")}}else console.error("The number of tabs does not match the number of tab panels.")}else console.error("No tabs found in the TabControl.")},t.prototype.setSelectedTabByHash=function(t){var e=this.tabs.find((function(e){var a;return(null===(a=e.getAttribute("data-tab-hash"))||void 0===a?void 0:a.toLowerCase())===t.toLowerCase()}));e?this.setSelectedTab(e):console.warn("[TabControl] No tab found matching hash: ".concat(t))},t.prototype.getTargetedTabIndex=function(){var t=this.rootElement.getAttribute("data-targeted-tab-position");if(!t)return null;var e=Number(t)-1;return isNaN(e)||e<0||e>=this.tabs.length?(console.error("Invalid 'data-targeted-tab-position': '".concat(t,"'. Must be between 1 and ").concat(this.tabs.length,".")),null):e},t.prototype.setSelectedTab=function(t,e,a){var o=this;void 0===e&&(e=!0),void 0===a&&(a=!0),this.tabs.forEach((function(n,i){var s=t===n;n.setAttribute("aria-selected",String(s)),o.toggleTabPanelVisibility(o.tabPanels[i],s),s?(n.removeAttribute("tabindex"),e&&n.focus(),a&&o.updateUrlHash(n)):n.setAttribute("tabindex","-1")}))},t.prototype.setSelectedToPreviousTab=function(t){if(this.tabs.length){var e=this.tabs.indexOf(t);this.setSelectedTab(this.tabs[(e-1+this.tabs.length)%this.tabs.length])}},t.prototype.setSelectedToNextTab=function(t){if(this.tabs.length){var e=this.tabs.indexOf(t);this.setSelectedTab(this.tabs[(e+1)%this.tabs.length])}},t.prototype.toggleTabPanelVisibility=function(t,e){t&&(t.toggleAttribute("hidden",!e),t.querySelectorAll("a, button, input, select, textarea").forEach((function(t){t.setAttribute("tabindex",e?"0":"-1")})))},t.prototype.onKeydown=function(t){var e=t.currentTarget;if(e){var a=!1;switch(t.key){case"ArrowLeft":case"Left":this.setSelectedToPreviousTab(e),a=!0;break;case"ArrowRight":case"Right":this.setSelectedToNextTab(e),a=!0;break;case"Home":this.firstTab&&this.setSelectedTab(this.firstTab),a=!0;break;case"End":this.lastTab&&this.setSelectedTab(this.lastTab),a=!0}a&&(t.preventDefault(),t.stopPropagation())}},t.prototype.updateUrlHash=function(t){if(this.hashManager&&this.controlId){var e=t.getAttribute("data-tab-hash");e&&this.hashManager.updateHash(this,e)}},t.prototype.onClick=function(t){var e=t.currentTarget;e&&this.setSelectedTab(e)},t}();document.addEventListener("DOMContentLoaded",(function(){var a=new t;document.querySelectorAll("[data-tab-control]").forEach((function(t){new e(t,a)})),a.applyHashToTabs()}))}();
//# sourceMappingURL=TabControl.min.js.map